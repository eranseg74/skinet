import{a as E,b as Z,c as ee}from"./chunk-W7ZXVULC.js";import{a as D}from"./chunk-NV35PLPJ.js";import{a as W,d as X}from"./chunk-LWBNYVAT.js";import{b as Y}from"./chunk-YGAUAQJO.js";import{a as te}from"./chunk-PNSYW7UU.js";import{$a as V,Cb as m,Db as c,Eb as _,Ja as F,Ka as $,Na as y,Oa as S,Pa as g,Qa as e,Ra as t,Sa as U,T as s,V as A,W as N,Wb as b,Xb as h,Za as L,bb as I,bd as K,cc as G,cd as Q,da as f,ec as H,fc as J,ma as j,na as n,pb as i,qb as o,rb as u,wa as v,wb as q,xb as z}from"./chunk-UJQ5AHL7.js";var ne=(a,d)=>d.id;function de(a,d){if(a&1&&(e(0,"tr",10)(1,"th",11),i(2),t(),e(3,"td"),i(4),m(5,"date"),t(),e(6,"td"),i(7),m(8,"currency"),t(),e(9,"td"),i(10),t()()),a&2){let r=d.$implicit;g("routerLink",z("/orders/",r.id)),n(2),u("# ",r.id),n(2),o(_(5,6,r.orderDate,"medium")),n(3),o(c(8,9,r.total)),n(3),o(r.status)}}var O=class a{orderService=s(E);orders=f([],{});ngOnInit(){this.orderService.getOrdersForUser().subscribe({next:d=>this.orders.set(d)})}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=v({type:a,selectors:[["app-order"]],decls:19,vars:0,consts:[[1,"mx-auto","mt-32"],[1,"font-semibold","text-2xl","mb-6","text-center"],[1,"flex","flex-col"],[1,"w-full"],[1,"min-w-full","divide-y","divide-gray-200","cursor-pointer"],[1,"bg-gray-50"],[1,"uppercase","text-gray-600","text-sm"],[1,"text-center","px-6","py-3"],[1,"text-left"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-100",3,"routerLink"],[1,"px-6","py-3"]],template:function(r,p){r&1&&(e(0,"div",0)(1,"h2",1),i(2,"My orders"),t(),e(3,"div",2)(4,"div",3)(5,"table",4)(6,"thead",5)(7,"tr",6)(8,"th",7),i(9,"Order"),t(),e(10,"th",8),i(11,"Date"),t(),e(12,"th",8),i(13,"Total"),t(),e(14,"th",8),i(15,"Status"),t()()(),e(16,"tbody",9),y(17,de,11,11,"tr",10,ne),t()()()()()),r&2&&(n(17),S(p.orders()))},dependencies:[J,b,h],encapsulation:2})};var ae=(a,d)=>d.productId;function oe(a,d){if(a&1&&(e(0,"tr")(1,"td",22)(2,"div",23),U(3,"img",24),e(4,"span"),i(5),t()()(),e(6,"td",25),i(7),t(),e(8,"td",26),i(9),m(10,"currency"),t()()),a&2){let r=d.$implicit;n(3),g("src",q(r.pictureUrl),j),n(2),o(r.productName),n(2),u("x",r.quantity),n(2),o(c(10,5,r.price))}}function le(a,d){if(a&1){let r=L();e(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),i(4),t(),e(5,"button",4),V("click",function(){A(r);let x=I();return N(x.onReturnClick())}),i(6),t()(),e(7,"div",5)(8,"div",6)(9,"h4",7),i(10,"Billing and delivery information"),t(),e(11,"dl")(12,"dt",8),i(13,"Shipping address"),t(),e(14,"dd",9),i(15),m(16,"address"),t()(),e(17,"dl")(18,"dt",8),i(19,"Payment info"),t(),e(20,"dd",9),i(21),m(22,"payment"),t()()(),e(23,"div",6)(24,"h4",7),i(25,"Order details"),t(),e(26,"dl")(27,"dt",8),i(28,"Email address"),t(),e(29,"dd",9),i(30),t()(),e(31,"dl")(32,"dt",8),i(33,"Order status"),t(),e(34,"dd",9),i(35),t()(),e(36,"dl")(37,"dt",8),i(38,"Order date"),t(),e(39,"dd",9),i(40),m(41,"date"),t()()()(),e(42,"div",10)(43,"div",11)(44,"table",12)(45,"tbody",13),y(46,oe,11,7,"tr",null,ae),t()()()(),e(48,"div",14)(49,"p",15),i(50,"Order summery"),t(),e(51,"div",16)(52,"div",6)(53,"dl",17)(54,"dt",18),i(55,"Subtotal"),t(),e(56,"dd",19),i(57),m(58,"currency"),t()(),e(59,"dl",17)(60,"dt",18),i(61,"Discount"),t(),e(62,"dd",20),i(63,"-$0.00"),t()(),e(64,"dl",17)(65,"dt",18),i(66,"Delivery fee"),t(),e(67,"dd",19),i(68),m(69,"currency"),t()()(),e(70,"dl",21)(71,"dt",18),i(72,"Total"),t(),e(73,"dd",19),i(74),m(75,"currency"),t()()()()()()}if(a&2){let r,p,x,w,M,B,P,R,T,k,l=I();n(4),u("Order summary for order #",(r=l.order())==null?null:r.id),n(2),o(l.buttonText),n(9),o(c(16,10,(p=l.order())==null?null:p.shippingAddress)),n(6),o(c(22,12,(x=l.order())==null?null:x.paymentSummary)),n(9),o((w=l.order())==null?null:w.buyerEmail),n(5),o((M=l.order())==null?null:M.status),n(5),o(_(41,14,(B=l.order())==null?null:B.orderDate,"medium")),n(6),S((P=l.order())==null?null:P.orderItems),n(11),u(" ",c(58,17,(R=l.order())==null?null:R.subtotal)," "),n(11),u(" ",c(69,19,(T=l.order())==null?null:T.shippingPrice)," "),n(6),o(c(75,21,(k=l.order())==null?null:k.total))}}var C=class a{orderService=s(E);activatedRoute=s(G);accountService=s(Y);adminService=s(te);router=s(H);order=f(null,{});buttonText=this.accountService.isAdmin()?"Return to admin":"Return to orders";ngOnInit(){this.loadOrder()}onReturnClick(){let d=this.accountService.isAdmin()?"/admin":"/orders";this.router.navigateByUrl(d)}loadOrder(){let d=this.activatedRoute.snapshot.paramMap.get("id");if(!d)return;(this.accountService.isAdmin()?this.adminService.getOrder(+d):this.orderService.getOrderDetailed(+d)).subscribe({next:p=>this.order.set(p)})}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=v({type:a,selectors:[["app-order-detailed"]],decls:1,vars:1,consts:[[1,"bg-white","py-8","shadow-md","max-w-5xl","mx-auto"],[1,"px-4","w-full"],[1,"flex","justify-between","items-center","align-middle"],[1,"text-2xl","text-center","font-semibold"],["mat-stroked-button","",3,"click"],[1,"mt-8","py-3","border-t","border-gray-200","flex","gap-16"],[1,"space-y-2"],[1,"text-lg","font-semibold"],[1,"font-medium"],[1,"mt-1","font-light"],[1,"mt-4"],[1,"border-y","border-gray-200"],[1,"w-full","text-center"],[1,"divide-y","divide-gray-200"],[1,"space-y-4","rounded-lg","border-y","p-4","border-gray-200","bg-white"],[1,"text-xl","font-semibold"],[1,"space-y-4"],[1,"flex","items-center","justify-between","gap-4"],[1,"font-medium","text-gray-500"],[1,"font-medium","text-gray-900"],[1,"font-medium","text-green-500"],[1,"flex","items-center","justify-between","gap-4","border-t","border-gray-200","pt-2"],[1,"py-4"],[1,"flex","items-center","gap-4"],["alt","product image",1,"w-10","h-10",3,"src"],[1,"p-4"],[1,"p-4","text-right"]],template:function(r,p){r&1&&F(0,le,76,23,"mat-card",0),r&2&&$(p.order()?0:-1)},dependencies:[X,W,Q,K,b,h,Z,ee],styles:["button[_ngcontent-%COMP%]{color:#943bf3!important}"]})};var ke=[{path:"",component:O,canActivate:[D]},{path:":id",component:C,canActivate:[D]}];export{ke as orderRoutes};
