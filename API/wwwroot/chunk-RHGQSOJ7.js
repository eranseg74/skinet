import{a as D,b as H}from"./chunk-GU7BXTX5.js";import{a as N}from"./chunk-LWBNYVAT.js";import{b as A}from"./chunk-YGAUAQJO.js";import{C as F,E as c,G as O,H as g,I as _,L as M,N as Z,O as E,P as w,R as I,T as v,V as R,W as J,Z as T}from"./chunk-F7KYJ6IV.js";import{$a as b,Ja as d,Ka as f,La as U,Na as $,Oa as j,Pa as s,Qa as o,Ra as r,Sa as p,T as m,bb as x,bd as h,cc as z,cd as y,da as V,ec as S,na as a,pb as l,qb as C,rb as k,sa as q,wa as u,wb as G}from"./chunk-UJQ5AHL7.js";var L=class t{fb=m(I);accountService=m(A);router=m(S);activatedRoute=m(z);returnUrl="/shop";constructor(){let e=this.activatedRoute.snapshot.queryParams.returnUrl;e&&(this.returnUrl=e)}loginForm=this.fb.group({email:[""],password:[""]});onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.accountService.getUserInfo().subscribe(),this.router.navigateByUrl(this.returnUrl)}})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=u({type:t,selectors:[["app-login"]],decls:15,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","email","placeholder","name@example.com","matInput",""],["formControlName","password","type","password","placeholder","Password","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2"]],template:function(i,n){i&1&&(o(0,"mat-card",0)(1,"form",1),b("ngSubmit",function(){return n.onSubmit()}),o(2,"div",2)(3,"h1",3),l(4,"Login"),r()(),o(5,"mat-form-field",4)(6,"mat-label"),l(7,"Email address"),r(),p(8,"input",5),r(),o(9,"mat-form-field",4)(10,"mat-label"),l(11,"Password"),r(),p(12,"input",6),r(),o(13,"button",7),l(14,"Sign in"),r()()()),i&2&&(a(),s("formGroup",n.loginForm))},dependencies:[v,M,F,g,_,w,E,N,T,D,R,y,h],encapsulation:2})};function tt(t,e){if(t&1&&(o(0,"mat-error"),l(1),r()),t&2){let i=x();a(),k("",i.label," is required")}}function et(t,e){t&1&&(o(0,"mat-error"),l(1,"Email is invalid"),r())}function it(t,e){t&1&&(o(0,"mat-error"),l(1,"Password is invalid"),r())}var B=class t{constructor(e){this.controlDir=e;this.controlDir.valueAccessor=this}label="";type="text";writeValue(e){}registerOnChange(e){}registerOnTouched(e){}get control(){return this.controlDir.control}static \u0275fac=function(i){return new(i||t)(q(O,2))};static \u0275cmp=u({type:t,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},decls:7,vars:9,consts:[["appearance","outline",1,"w-full","mb-4"],["matInput","",3,"formControl","type","placeholder"]],template:function(i,n){i&1&&(o(0,"mat-form-field",0)(1,"mat-label"),l(2),r(),p(3,"input",1),d(4,tt,2,1,"mat-error"),d(5,et,2,0,"mat-error"),d(6,it,2,0,"mat-error"),r()),i&2&&(a(2),C(n.label),a(),s("type",G(n.type))("placeholder",G(n.label))("formControl",n.control),a(),f(n.control.hasError("required")?4:-1),a(),f(n.control.hasError("email")?5:-1),a(),f(n.control.hasError("pattern")?6:-1))},dependencies:[v,F,g,Z,T,D,R,J],encapsulation:2})};function rt(t,e){if(t&1&&(o(0,"li"),l(1),r()),t&2){let i=e.$implicit;a(),C(i)}}function ot(t,e){if(t&1&&(o(0,"div",8)(1,"ul",10),$(2,rt,2,1,"li",null,U),r()()),t&2){let i=x();a(2),j(i.validationErrors())}}var P=class t{fb=m(I);accountService=m(A);router=m(S);snack=m(H);validationErrors=V(null,{});registerForm=this.fb.group({firstName:["",c.required],lastName:["",c.required],email:["",[c.required,c.email]],password:["",[c.required,c.pattern("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-z\\d$@$!%*?&].{7,}")]]});onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.snack.success("Registration successful - you can now login"),this.router.navigateByUrl("/account/login")},error:e=>this.validationErrors.set(e)})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=u({type:t,selectors:[["app-register"]],decls:12,vars:3,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","First name","formControlName","firstName"],["label","Last name","formControlName","lastName"],["label","Email address","formControlName","email","type","email"],["label","Password","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2",3,"disabled"],[1,"list-disc","px-3"]],template:function(i,n){i&1&&(o(0,"mat-card",0)(1,"form",1),b("ngSubmit",function(){return n.onSubmit()}),o(2,"div",2)(3,"h1",3),l(4,"Register"),r()(),p(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),d(9,ot,4,0,"div",8),o(10,"button",9),l(11," Register "),r()()()),i&2&&(a(),s("formGroup",n.registerForm),a(8),f(n.validationErrors()?9:-1),a(),s("disabled",n.registerForm.invalid))},dependencies:[v,M,g,_,w,E,N,y,h,B],encapsulation:2})};var Lt=[{path:"login",component:L},{path:"register",component:P}];export{Lt as accoutRoutes};
